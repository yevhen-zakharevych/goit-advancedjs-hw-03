{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_v5ZqsoCBTNbnAMj0I30H5oO7TBEyyAOAqsK6dL1nSDQ8kYLpTDBJqJJ1Cj2BM2Al';\n\nexport function fetchBreeds() {\n  return axios.get('https://api.thecatapi.com/v1/breeds').then(({ data }) => {\n    return data;\n  });\n}\n\nexport function fetchCatByBreed(id) {\n  return axios\n    .get('https://api.thecatapi.com/v1/images/search', {\n      breed_ids: id,\n    })\n    .then(({ data }) => {\n      return data;\n    });\n}\n","import SlimSelect from 'slim-select';\nimport 'slim-select/styles';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst selectLoaderEl = document.querySelector('.select-block .loader');\nconst infoLoaderEl = document.querySelector('.info-block .loader');\nconst infoContainer = document.querySelector('.info-container');\nconst selectEl = document.querySelector('#select');\nconst catsBreeds = [];\n\nselectLoaderEl.style.display = 'block';\ninfoLoaderEl.style.display = 'none';\nselectEl.classList.add('hidden');\n\nfetchBreeds()\n  .then(breeds => {\n    onFetchBreeds(breeds);\n  })\n  .catch(error => {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n    selectLoaderEl.style.display = 'none';\n  });\n\nfunction onFetchBreeds(breeds) {\n  selectLoaderEl.style.display = 'none';\n  selectEl.classList.remove('hidden');\n\n  catsBreeds.push(...breeds);\n\n  const options = catsBreeds.map(breed => ({\n    text: breed.name,\n    value: breed.id,\n  }));\n\n  new SlimSelect({\n    select: '#select',\n    data: options,\n    events: {\n      afterChange: onChange,\n    },\n  });\n}\n\nfunction onChange(option) {\n  const cat = catsBreeds.find(breed => breed.id === option[0].value);\n  infoLoaderEl.style.display = 'block';\n  infoContainer.innerHTML = '';\n\n  fetchCatByBreed(cat.id)\n    .then(image => {\n      const catInfoEl = composeCatInfoEl(cat, image[0]);\n      infoContainer.innerHTML = catInfoEl;\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n      });\n    })\n    .finally(() => {\n      infoLoaderEl.style.display = 'none';\n    });\n}\n\nfunction composeCatInfoEl(cat, image) {\n  return `\n    <div class=\"cat-info-wrapper\">\n      <img class=\"cat-info-img\" src=\"${image.url}\" alt=\"${cat.name}\">\n      <div class=\"cat-info-details\">\n        <h3 class=\"cat-info-title\">${cat.name}</h3>\n        <p class=\"cat-info-text\">${cat.description}</p>\n        <p class=\"cat-info-text\"><strong>Temperament:</strong> ${cat.temperament}</p>\n      </div>\n    </div>\n  `;\n}\n"],"names":["axios","fetchBreeds","data","fetchCatByBreed","id","selectLoaderEl","infoLoaderEl","infoContainer","selectEl","catsBreeds","breeds","onFetchBreeds","error","iziToast","options","breed","SlimSelect","onChange","option","cat","image","catInfoEl","composeCatInfoEl"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,WAAW,EACvC,wEAEK,SAASC,GAAc,CAC5B,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAK,CAAC,CAAE,KAAAE,KACvDA,CACR,CACH,CAEO,SAASC,EAAgBC,EAAI,CAClC,OAAOJ,EACJ,IAAI,6CAA8C,CACjD,UAAWI,CACjB,CAAK,EACA,KAAK,CAAC,CAAE,KAAAF,KACAA,CACR,CACL,CCXA,MAAMG,EAAiB,SAAS,cAAc,uBAAuB,EAC/DC,EAAe,SAAS,cAAc,qBAAqB,EAC3DC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAa,CAAA,EAEnBJ,EAAe,MAAM,QAAU,QAC/BC,EAAa,MAAM,QAAU,OAC7BE,EAAS,UAAU,IAAI,QAAQ,EAE/BP,EAAa,EACV,KAAKS,GAAU,CACdC,EAAcD,CAAM,CACxB,CAAG,EACA,MAAME,GAAS,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,OACrB,CAAK,EACDP,EAAe,MAAM,QAAU,MACnC,CAAG,EAEH,SAASM,EAAcD,EAAQ,CAC7BL,EAAe,MAAM,QAAU,OAC/BG,EAAS,UAAU,OAAO,QAAQ,EAElCC,EAAW,KAAK,GAAGC,CAAM,EAEzB,MAAMI,EAAUL,EAAW,IAAIM,IAAU,CACvC,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACd,EAAC,EAEF,IAAIC,EAAW,CACb,OAAQ,UACR,KAAMF,EACN,OAAQ,CACN,YAAaG,CACd,CACL,CAAG,CACH,CAEA,SAASA,EAASC,EAAQ,CACxB,MAAMC,EAAMV,EAAW,KAAKM,GAASA,EAAM,KAAOG,EAAO,CAAC,EAAE,KAAK,EACjEZ,EAAa,MAAM,QAAU,QAC7BC,EAAc,UAAY,GAE1BJ,EAAgBgB,EAAI,EAAE,EACnB,KAAKC,GAAS,CACb,MAAMC,EAAYC,EAAiBH,EAAKC,EAAM,CAAC,CAAC,EAChDb,EAAc,UAAYc,CAChC,CAAK,EACA,MAAMT,GAAS,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,OACvB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbN,EAAa,MAAM,QAAU,MACnC,CAAK,CACL,CAEA,SAASgB,EAAiBH,EAAKC,EAAO,CACpC,MAAO;AAAA;AAAA,uCAE8BA,EAAM,GAAG,UAAUD,EAAI,IAAI;AAAA;AAAA,qCAE7BA,EAAI,IAAI;AAAA,mCACVA,EAAI,WAAW;AAAA,iEACeA,EAAI,WAAW;AAAA;AAAA;AAAA,GAIhF"}